<!DOCTYPE html>
<html>
<head>
  <title>Proximity Live Value</title>
	<script src="my_jquery_functions.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div class="container">
        <div class="row d-flex justify-content-center">
          <div class="col-sm-12">
            <h1 id = "heading">ARDUINO FT. NODE JS</h1>
            <h2 id = "heading">Proximity Live Feed</h1>
            <p>Live data fed from IR Proximity Sensor, newest data is on top</p>
            
            <div class="d-flex justify-content-center">
              <table id="myTable">
                <tr class="judul">
                  <td>Date</td>
                  <td>Time</td>
                  <td>Message</td>
                </tr>
              </table>

            </div>
            
          </div>
        </div>
        <!-- <ul id="myList"></ul> -->
        
    </div>
    
  
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      $(function () {
        var socket = io()
        // $('form').submit(function(){
        //   socket.emit('chat message', $('#m').val())
        //   $('#m').val('')
        //   return false
        // })
        socket.on('chat message', function(msg){
          var date = new Date(msg['waktu'])

          //Add data to table (Method 1) to Last (JQuery)
          // $('#myTable').append("<tr><td>"+date.toDateString()+"</td> <td>"+date.toLocaleTimeString()+"</td> <td>"+msg['psn']+"</td></tr>" );
          
          //Add data to table (Method 2) append to 2nd (Javascript)
          var table = document.getElementById("myTable")
          var row = table.insertRow(1)
          var cell1 = row.insertCell(0)
          var cell2 = row.insertCell(1)
          var cell3 = row.insertCell(1)
          cell1.innerHTML = date.toDateString()
          cell2.innerHTML = date.toLocaleTimeString()
          cell3.innerHTML = msg['psn']

          //Append to List
          // $('#myList').append($('<li>').text(msg))
          // window.scrollTo(0, document.body.scrollHeight)
        })
      })
    </script>
</body>

</html>